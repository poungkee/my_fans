# FANS 프로젝트 워크로그

---

## 🚨 **TODO - 개선 필요 사항**

*(현재 개선 필요 사항 없음)*

---

## 📋 **hoddukz 작업 이력 (최신 순)**

### 🗓️ **2025-09-30**

**환경 변수 통합 및 인프라 구성**

- **환경 변수 파일 통합**
  - 분산된 3개의 `.env` 파일을 루트 `.env` 하나로 통합
  - `docker-compose.yml` 모든 서비스의 `env_file` 경로를 루트 `.env`로 수정
  - `.env.example` 템플릿 파일 생성 (팀원 온보딩용)
  - `.gitignore` 업데이트하여 환경변수 파일 추적 제외

- **AWS 인프라 구성 (Terraform)**
  - 공유 VPC 환경에서 개인 테스트용 서브넷 분리 구성
  - 기존 VPC(vpc-0fa60f4833b7932ad) 사용, 10.0.30.0/24 대역 활용
  - 리소스별 파일 분리: vpc.tf, security_groups.tf, ec2.tf, rds.tf, s3.tf, data.tf
  - EC2(1대) + RDS(PostgreSQL) + S3 구성
  - `infrastructure/` 디렉토리 Git 추적 제외 (개인 작업용)

- **Docker Compose 설정 정리**
  - bias-analysis-ai 서비스 주석 해제 및 활성화
  - recommendation-ai 서비스 제거 (미사용)
  - 모든 서비스가 통합 `.env` 파일 참조하도록 수정

- **프로젝트 파일 정리**
  - `work_log.md` Git 추적 제외 (개인 작업 기록)
  - `.gitignore` 전면 정비

---

### 🗓️ **2025-09-29**

**편향성 분석 AI 시스템 구현 완료**

- **Bias Analysis AI 서비스 구현**
  - FastAPI 기반 편향성 분석 AI 서비스 완성
  - 감성 분석, 키워드 추출, 정치 편향 분석 통합
  - 학습된 모델 파일 적용 및 Docker 컨테이너화
  - Git LFS 도입으로 대용량 AI 모델 파일 관리 최적화

- **언론사별 편향성 점수 기능 추가**
  - 각 언론사별 최근 한 달치 뉴스 편향성 점수 자동 계산
  - 뉴스-언론사 정보 탭에 편향성 통계 표시 기능 구현
  - 실시간 편향성 분석 데이터 시각화

- **팀 협업 환경 개선**
  - 팀원의 백업 저장소 병합 및 AI 작업 통합
  - 문서 정리 및 개발 가이드 업데이트

---

### 🗓️ **2025-09-26**

**크롤링 시스템 개선 및 AI 개발 착수**

- **일부 언론사 크롤링 로직 개선**
  - 크롤링 실패율이 높았던 언론사들의 파싱 로직 수정
  - 이미지 추출 및 콘텐츠 정제 알고리즘 최적화
  - 안정성 향상으로 데이터 수집 품질 개선

- **Bias Analysis AI 개발 시작**
  - 편향성 분석을 위한 AI 모델 설계 및 아키텍처 구상
  - 학습 데이터 수집 및 전처리 작업 착수
  - 감성 분석, 키워드 추출 모듈 기초 구현

---

### 🗓️ **2025-09-24**

**핵심 변경사항: 뉴스 콘텐츠 표시 문제 완전 해결 및 크롤링 시스템 마이크로서비스화**

- **모든 기사 동일 더미 텍스트 표시 문제 해결**
  - 문제: 모든 뉴스에서 "최근 발표된 연구 결과에 따르면, 인공지능 기술의 발전이..." 동일 텍스트 표시
  - 원인: 프론트엔드 NewsDetailPage.js에 하드코딩된 더미 텍스트 + 백엔드 API에서 content 필드 누락
  - 해결: 백엔드 mapArticle 함수에 content 필드 추가, 프론트엔드 더미 텍스트 제거 및 적절한 fallback 메시지 구현

- **AWS 마이그레이션 아키텍처 설계**
  - 시각적 다이어그램 포함한 상세 마이그레이션 계획 문서 작성
  - ECS Fargate, RDS, ElastiCache 활용한 완전 클라우드 아키텍처
  - 예상 비용: $160-290/월, 4단계 점진적 마이그레이션 전략
  - 디렉토리 구조 재정리: AI 서비스 및 크롤러 서비스 경로 최적화

- **RSS/API 크롤러 완전 분리 및 마이크로서비스 구현**
  - 기존 통합 크롤러를 RSS와 API 두 개의 독립 서비스로 완전 분리
  - Docker Compose 기반 독립 컨테이너 운영 (포트 4002, 4003)
  - RSS sourceId 매핑 오류 수정 (한겨레: 3→7, 조선일보: 4→5)
  - 각 크롤러별 독립적인 엔드포인트 및 헬스체크 구현

- **경향신문 한글 인코딩 문제 해결**
  - 문제: RSS 피드에서 한글이 깨져서 저장되는 현상
  - 해결: axios responseType을 'arraybuffer'로 설정하여 Buffer 기반 UTF-8 명시적 디코딩

- **언론사별 뉴스 필터링 기능 구현**
  - 새 API 엔드포인트: `/api/news/by-source/:sourceName`
  - 언론사별 일주일치 뉴스 조회 및 페이지네이션 지원
  - 무한 스크롤 기능으로 사용자 경험 개선
  - 한겨레 기사 표시 문제 해결 (카테고리 필터링 → 언론사 필터링)

- **Git 저장소 최적화**
  - 22,000개 node_modules 파일을 .gitignore로 제외 처리
  - 저장소 용량 대폭 축소 및 관리 효율성 향상

### 🗓️ **2025-09-23**
- **UI/UX 개선 작업**
  - 마이페이지 스타일 업데이트 및 사용자 활동 로그 구현
  - 소셜 로그인 구독 기능 오류 수정
  - StockSection toFixed 오류 해결 (숫자 타입 검증 추가)
  - dev-main 브랜치 병합 및 통합

### 🗓️ **2025-09-22**
- **자동화 시스템 구축**
  - 30초 간격 자동 뉴스 크롤링 스케줄러 구현
  - Docker 기반 안정적 자동화 환경 구축
  - 포트 표준화: API(3000), AI(8000), Frontend(3001)
  - MarketSummary 엔티티 완성 및 TypeScript 오류 해결

### 🗓️ **2025-09-20**

**대규모 시스템 개편 세션 - 전체 아키텍처 현대화**

- **데이터베이스 구조 완전 재설계**
  - 17개 → 13개 테이블로 최적화된 구조 개편
  - TypeORM 엔티티 12개 전면 재작성 (User, NewsArticle, Category, Source 등)
  - 사용자 행동 통합 추적을 위한 UserAction 테이블 도입
  - 통계 데이터 분리를 위한 ArticleStat 테이블 설계

- **Docker 기반 개발환경 완전 구축**
  - 크로스 플랫폼 지원 (Windows 팀원 고려한 .bat 스크립트 포함)
  - docker-compose.yml 기반 원클릭 개발환경 실행
  - PostgreSQL 15, Node.js 20 Alpine 컨테이너 구성
  - 핫 리로딩 지원 개발용 Docker 설정

- **API 시스템 전면 개편**
  - 새 데이터베이스 구조에 맞는 모든 엔드포인트 재작성
  - QueryBuilder 활용한 효율적인 조인 쿼리 적용
  - RESTful API 설계 원칙 준수 및 에러 처리 강화
  - 트렌딩 알고리즘 개선 (7일 기준)

- **뉴스 크롤링 시스템 고도화**
  - 동적 Source/Category 자동 생성 기능
  - 키워드 추출 및 ArticleStat 자동 초기화
  - 중복 검사 로직 개선

- **전체 시스템 안정성 확보**
  - TypeScript 컴파일 에러 100% 해결
  - Docker 컨테이너 빌드/실행 최적화
  - 프론트엔드-백엔드 연동 검증 완료

### 🗓️ **2025-09-19**
- **자동화 및 API 연동**
  - 자동 뉴스 크롤링 스케줄러 시스템 구현
  - 네이버 뉴스 API 연동을 통한 실시간 뉴스 수집
  - dev 브랜치 변경사항 main 브랜치 병합

### 🗓️ **2025-09-18**
- **크롤링 시스템 완성**
  - 안정적인 뉴스 크롤링 시스템 개발 완료
  - 메인페이지 뉴스 정상 출력 확인
  - 한글 인코딩 문제 완전 해결 및 콘텐츠 파싱 최적화
  - 안정성 검증 후 main 브랜치 배포

### 🗓️ **2025-09-17**
- **환경설정 및 AI 서비스 개선**
  - AI 서비스 AWS 퍼블릭 IP 변경으로 접근성 향상
  - .env.example 템플릿 추가 및 환경설정 가이드 제공
  - nvm/Node.js 자동 설치 스크립트로 개발환경 편의성 향상
  - Naver API 인증 시스템 안정화 (중복 키 문제 해결, URL 인코딩 수정)
  - Gemini API → 로컬 AI 서비스 전환으로 독립성 확보

### 🗓️ **2025-09-16**
- **이미지 추출 및 텍스트 처리 고도화**
  - 다양한 선택자 활용 이미지 추출 로직 개선
  - iconv-lite 라이브러리를 통한 한국어 인코딩 완전 해결
  - 프론트엔드 API 연동 최적화 및 CORS 설정 완료
  - 크로스 플랫폼 설정 스크립트 (Windows PowerShell 포함)
  - 프로젝트 구조 대규모 리팩토링으로 유지보수성 향상

### 🗓️ **2025-09-15**

**프로젝트 초기 구축 및 핵심 기능 개발**

- **AI 요약 시스템 구현**
  - Gemini 1.5 Flash API 통합
  - 뉴스 기사 자동 요약 기능 개발
  - 브랜치 충돌 해결 및 시스템 안정화

- **데이터베이스 설계**
  - TypeORM Entity 설계 제안서 작성
  - 댓글 시스템 및 사용자 상호작용 엔티티 설계
  - 확장 가능한 데이터베이스 구조 기반 마련

- **마이크로서비스 아키텍처 설계**
  - 팀 협업을 위한 서비스 분리 구조 설계
  - 프론트엔드 개발 가이드라인 작성

- **프로젝트 기초 설정**
  - Git 저장소 초기 설정 및 프라이버시 보호 (.gitignore)
  - 크리덴셜 설정 테스트 및 기본 프로젝트 구조 수립

---

## 📊 **전체 프로젝트 통계**

**작업 기간**: 2025-09-15 ~ 2025-09-24 (10일간)
**총 커밋 수**: 69개
**주요 마일스톤**:
- 시스템 아키텍처 설계 → 데이터베이스 개편 → 크롤링 시스템 완성 → 마이크로서비스 분리 → UI/UX 개선

**핵심 기술 스택**:
- Backend: Node.js + TypeScript + TypeORM + PostgreSQL
- Frontend: React + JavaScript
- Infrastructure: Docker + Docker Compose
- AI: Gemini API → Local AI Service
- Crawling: RSS + Naver API

---

**최종 업데이트**: 2025-09-24
**현재 상태**: 모든 핵심 기능 완성 및 안정화 완료